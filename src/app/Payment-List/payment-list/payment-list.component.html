<div class="container-fluid mt-3">
    <div class="row mb-3">
      <div class="col">
        <div class="card card_border">
          <div class="card-header card_header_background">
            PAYMENT LIST
          </div>
          <div class="card-body fix-side">
            <form
               [formGroup]="biilsList"
               (ngSubmit)="getData()"
              class="col-lg-12 div-nopadding"
              style="background: rgba(255, 255, 255, 0.7)"
            >
              <div class="d-flex justify-content-center">
                <div class="mr-1">
                  <label for="">Date:</label>
                  <dx-date-box
                      formControlName="date"
                      [value]=""
                      [max]=""
                      type="date">
                  </dx-date-box>
              </div>
              <div class="mr-1">
                <label for="">Payer Name:</label>
                <dx-text-box placeholder="Payer name" formControlName="payerName"  width="280" style="padding-right: 10px;">
                </dx-text-box>
              </div>

              <div class="mr-1">
                <label for="">Invoice number:</label>
                <dx-text-box placeholder="Invoice number" formControlName="invoiceNo"  width="280" style="padding-right: 10px;">kk
                </dx-text-box>
              </div>

              <div class="mr-1">
                <label for="">Control Number :</label>
                <dx-text-box placeholder="Control number" formControlName="controlNo"  width="280" style="padding-right: 10px;">
                </dx-text-box>
              </div>
                
              
                <div>
                  <label for="">Action</label>
                  <br/>
                  <dx-button
                    [elementAttr]="{ class: '' }"
                    text="Fetch Records"
                    type="default"
                    id="btn-fetch"
                    (onClick)="getData()"
                  >
                  </dx-button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  
  <div class="col" *ngIf="showPayementList">
    <div class="card card_border">
      <div class="card-body card-nopadding">
        <dx-data-grid
        class="div-nopadding gridContainer"
        [dataSource]="responseData"
        [showBorders]="true"
        [focusedRowEnabled]="false"
        (onRowDblClick)="previewBillsInfo($event)"
        [columnAutoWidth]="true"
        height="funcpopHeigt(datagridHeight)"
        [showRowLines]="false"
        [rowAlternationEnabled]="true"
        [allowColumnResizing]="true"
        [columnHidingEnabled]="false"
        [repaintChangesOnly]="true">
  
        <dxo-search-panel [visible]="true"> </dxo-search-panel>
  
        <dxo-paging [pageSize]="pageSize" [enabled]="false"></dxo-paging>
  
        <dxo-scrolling  mode="virtual" rowRenderingMode="virtual"></dxo-scrolling>
  
        <dxo-pager [showPageSizeSelector]="true" [showInfo]="true" [allowedPageSizes]="allowedPageSises"></dxo-pager>
  
        <dxo-filter-row [visible]="false"></dxo-filter-row>
  
        <dxo-export [enabled]="true" [fileName]="title" [allowExportSelectedData]="true"></dxo-export>
  
        <dxo-selection mode="single"></dxo-selection>
  
        <dxo-header-filter [visible]="true"></dxo-header-filter>
  
        <dxo-filter-panel [visible]="true"></dxo-filter-panel>

        <dxi-column dataField="invoice" caption="Invoice number" dataType="string" ></dxi-column>
        <dxi-column dataField="controlNo" caption="Control number" dataType="string" ></dxi-column>
        <dxi-column dataField="cusNo" caption="Customer number" dataType="string" ></dxi-column>
        <dxi-column dataField="billAmount" caption="Bill Amount" dataType="string" ></dxi-column>
        <dxi-column dataField="paidAmount" caption="Paid amount" dataType="string" ></dxi-column>
        <dxi-column dataField="balanceAmount" caption="Outstanding Balance" dataType="string" ></dxi-column>
        <dxi-column dataField="payerName" caption="Payer Name" dataType="string" ></dxi-column>
        <dxi-column dataField="receipt" caption="Receipt" dataType="string" ></dxi-column>
        <dxi-column dataField="date" caption="Payment Date" dataType="string" ></dxi-column>
        <dxi-column dataField="CHANNEL" caption="Channel" dataType="string" ></dxi-column>
        <dxi-column dataField="psp" caption="PSP" dataType="string" ></dxi-column>
        <dxi-column dataField="receipt" caption="Action" 
        cellTemplate="cellTemplateReceipt">
         <div *dxTemplate="let d of 'cellTemplateReceipt'">
        <div *ngIf="d.data.receipt !='' " class="d-flex text-center">
          <button class="btn btn-outline-primary btn-sm" icon="fa fa-eye" id="btn-view"
          (click)="previewBillsInfoN(d.data)"
          >View</button>
        </div>
        </div>
        
       </dxi-column>
  
        <dxo-load-panel
        [enabled]="true">
       </dxo-load-panel>
      </dx-data-grid>
      </div>
    </div>
  </div>


  <div  class="row mb-3 mx-2 mt-4" *ngIf="showReceiptDetails">
    <div class="col" >
    
        <!-- <div class="card card_border">
          <h6 class="card-header card_header_background ">Receipt Details</h6>
          <div class="card-body fix-side">

      
            <div class="col-12">
                <div class="row">

                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 mergeRight">
                    <div class="card card_border">
                      <div>
                        <dx-button
                        [elementAttr]="{ class: '' }"
                        text="Print"
                        type="default"
                        id=""
                        icon ="fa fa-print"
                        (onClick)="printInvoiceReceiptZSSF()"
                      >
                      </dx-button>
                      </div>
                      <form class="col-lg-12  div-nopadding"
                      style="background: rgba(255, 255, 255, 0.7);" enctype="multipart/form-data" role="form"
                      >
                      <div class="card-body">
                        <table>
                          <tbody>
                            <tr>
                              <td>Control Number:</td>
                              <td style="padding-left: 1rem;"> <strong>{{controlNo}}</strong></td>
                            </tr>
                            <tr>
                              <td>Description:</td>
                              <td style="padding-left: 1rem;"><strong>{{description}}</strong></td>
                            </tr>
                            <tr>
                              <td>Bill Amount:</td>
                              <td style="padding-left: 1rem;"> <strong>{{billAmount | number:'2.'}}</strong></td>
                            </tr>
                             <tr>
                                <td>Paid Amount:</td>
                                <td style="padding-left: 1rem;"> <strong>{{paidAmount | number:'2.'}}</strong></td>
                              </tr>
                              <tr>
                                <td>Paid Amount total:</td>
                                <td style="padding-left: 1rem;"> <strong>{{paidAmountTotal}}</strong></td>
                              </tr>
        
                              <tr>
                                <td>Amount Due:</td>
                                <td style="padding-left: 1rem;"> <strong>{{amountDue | number:'2.'}}</strong></td>
                              </tr>

                              <tr>
                                <td>Currency:</td>
                                <td style="padding-left: 1rem;"> <strong>{{currency}}</strong></td>
                              </tr>

                              <tr>
                                <td>Credit Account:</td>
                                <td style="padding-left: 1rem;"> <strong>{{creditAcc}}</strong></td>
                              </tr>

                              <tr>
                                <td>PSP Code:</td>
                                <td style="padding-left: 1rem;"> <strong>{{pspCode}}</strong></td>
                              </tr>
                              <tr>
                                <td>Payment Reference:</td>
                                <td style="padding-left: 1rem;"> <strong>{{payRef}}</strong></td>
                              </tr>

                              <tr>
                                <td>Payment Method:</td>
                                <td style="padding-left: 1rem;"> <strong>{{payMethod}}</strong></td>
                              </tr>

                              <tr>
                                <td>Receipt Number:</td>
                                <td style="padding-left: 1rem;"> <strong>{{receiptNo}}</strong></td>
                              </tr>

                              <tr>
                                <td>Created At:</td>
                                <td style="padding-left: 1rem;"> <strong>{{createdAt}}</strong></td>
                              </tr>

                              <tr>
                                <td>Invoice Number:</td>
                                <td style="padding-left: 1rem;"> <strong>{{invoiceNo}}</strong></td>
                              </tr>

                              <tr>
                                <td>Customer ID:</td>
                                <td style="padding-left: 1rem;"> <strong>{{customerId}}</strong></td>
                              </tr>

                              <tr>
                                <td>Payer name:</td>
                                <td style="padding-left: 1rem;"> <strong>{{payerName}}</strong></td>
                              </tr>

                              <tr>
                                <td>Customer Number:</td>
                                <td style="padding-left: 1rem;"> <strong>{{customerNo}}</strong></td>
                              </tr>

                              <tr>
                                <td>Invoice ID:</td>
                                <td style="padding-left: 1rem;"> <strong>{{invoiceId}}</strong></td>
                              </tr>

                              <tr>
                                <td>ZanMalipo CN:</td>
                                <td style="padding-left: 1rem;"> <strong>{{zmControlNo}}</strong></td>
                              </tr>

                              <tr>
                                <td>Amount Paid in words:</td>
                                <td style="padding-left: 1rem;"> <strong>{{amountPaidWords}}</strong></td>
                              </tr>

                              <tr>
                                <td>Amount Due in words:</td>
                                <td style="padding-left: 1rem;"> <strong>{{amountDueWords}}</strong></td>
                              </tr>
        
                       
                          </tbody>
                        </table>
                        
                      </div>
                    </form>
                    </div>
                  </div>
                </div>
              </div>

          </div>
        </div> -->
  
        <div class="card card_border">
          <h6 class="card-header card_header_background ">Receipt Details</h6>
          <div class="card-body fix-side">

      
            <div class="col-12">
                <div class="row">

                  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 mergeRight">
                    <div class="card card_border">
                  
                      <form class="col-lg-12  div-nopadding"
                      style="background: rgba(255, 255, 255, 0.7);" enctype="multipart/form-data" role="form"
                      >
                      <div class="card-body">
                        <table class="table table-striped table-inverse table-bordered">
                          <tbody>
                            <tr>
                              <td style="text-align: right">Control number</td>
                              <td>{{controlNo}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Description</td>
                              <td>{{description}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Bill Amount</td>
                              <td>{{billAmount | number:'2.'}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Paid Amount</td>
                              <td>{{paidAmount | number:'2.'}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Paid Amount total</td>
                              <td>{{paidAmountTotal | number:'2.'}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Amount Due</td>
                              <td>{{amountDue | number:'2.'}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Currency</td>
                              <td> {{currency}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Credit Account</td>
                              <td>{{creditAcc}}</td>
                            </tr>
                
                            <tr>
                              <td style="text-align: right">PSP Code</td>
                              <td>{{pspCode}}</td>
                            </tr>
                
                            <tr>
                              <td style="text-align: right">Payment Reference</td>
                              <td>{{payRef}}</td>
                            </tr>
                  
                          
                            <tr>
                              <td style="text-align: right">Payment Method</td>
                              <td>{{payMethod}}</td>
                            </tr>
                           
                            
                            <tr>
                              <td style="text-align: right">Receipt number</td>
                              <td>{{receiptNo}}</td>
                            </tr>
                            <tr *ngIf="receiptNo">
                              <td style="text-align: right">
                                Print Receipt
                              </td>
                              <td>
                                <button   type="button" name="" id="" class="btn btn-success" (click)="printInvoiceReceiptZSSF()"><i class="fa fa-print" aria-hidden="true"></i>Receipt</button>
                              </td>
                            </tr>
                          
                
                            <tr>
                              <td style="text-align: right">Created At</td>
                              <td>{{createdAt}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Invoice number</td>
                              <td>{{invoiceNo}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Customer ID</td>
                              <td>{{customerId}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Customer number</td>
                              <td>{{customerNo}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Invoice ID</td>
                              <td>{{invoiceId}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">ZanMalipo CN</td>
                              <td>{{zmControlNo}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Amount Paid in words</td>
                              <td>{{amountPaidWords}}</td>
                            </tr>
                            <tr>
                              <td style="text-align: right">Amount due in words</td>
                              <td>{{amountDueWords}}</td>
                            </tr>
                          
                            
                          </tbody>
                      </table>
                        
                      </div>
                    </form>
                    </div>
                  </div>
                </div>
              </div>

          </div>
        </div>

   
     
      </div>
   </div>


 


  <div id="print-container2" class="invoice_wrapper" style="display: none;">
    <div class="app">
      <!-- <img src="./assets/images/zssf.png" class="img-fluid ${3|rounded-top,rounded-right,rounded-bottom,rounded-left,rounded-circle,|} cover" alt=""> -->
  
      <div class="container p-3">
          <div class="row">
              <div class="col-xl-2 col-lg-2 col-md-3 col-sm-4 col-xs-12">
                  <img src="./assets/images/zssf.png" class="img-fluid ${3|rounded-top,rounded-right,rounded-bottom,rounded-left,rounded-circle,|}" alt="ZSSF logo">
              </div>
              <div class="col-xl-10 col-lg-10 col-md-9 col-sm-8 col-xs-12">
                  <div class="p-3">
                      <h1 class="text-center">ZANZIBAR SOCIAL SECURITY FUND</h1>
                      <p class="text-center">
                          <span>
                          Headquarters P.O.Box 2716, ZSSF Building, Kilimani, Mnara wa Mbao, Unguja Zanzibar
                          </span>
                      <span>
                          Tel +255 24 2230242, Fax +255 24 223 2820, Email: info@zssf.or.tz Website: www.zssf.or.tz
                              </span>
                      <span>
                          <strong>Pemba Branch:</strong> P.O.Box 293, Tibirinzi, Chake Chake Pemba Zanzibar
                              </span>
                      <span>
                          Tel: +255 24 2452050, Fax: +255 24 2452132
                              </span>
                      </p>
                  </div>
              </div>
              <div class="col-xl-10 col-lg-10 col-md-9 col-sm-8 col-xs-12">
                <img src="./assets/images/received.png" class="paid img-fluid" alt="Received logo" />
              </div>
          </div>
          <div class="row pb-2">
            <div class="container">
              <div class="">
                <div class="d-flex justify-content-start">
                  <label class="recieved-from">
                      <strong>RECEIVED FROM:  </strong>
                  </label>
                  <span><i>{{payerName}}</i></span>
              </div>
              <div  class="d-flex justify-content-end">
                <div class="flex-column">
                  <div>No:
                    <label class="font-weight-bold">{{receiptNo}}</label>
                </div>
                  <div>Invoice Number:
                    <label class="font-weight-bold">{{invoiceNo}}</label>
                </div>
                <!-- MMMM d, y, h:mm:ss a z -->
                <div>Date of Payment:
                    <label class="font-weight-bold">{{createdAt | date:'MMMM d, y.'}}</label>
                </div>
                </div>
              </div>
              </div>
            </div>
          </div>
          <div class="row pb-4">
            <div class="container">
              <label class="respect">
                <strong>IN RESPECT OF:</strong>
            </label>
            <span>
                <i>{{description}}</i>
            </span>
            </div>
          </div>
          <div class="row mb-4">
            <div class="container">
              <table border="1" class="full_table">
                <thead>
                    <tr>
                        <td><strong>Customer No.</strong></td>
                        <td><strong>Control Number</strong></td>
                        <td><strong>Paid Amount</strong></td>
                        <td><strong>Total Bill Amount</strong></td>
                        <td><strong>Outstanding Balance</strong></td>
                        <td><strong>Currency</strong></td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>{{customerNo}}</td>
                        <td>{{controlNo}}</td>
                        <td>{{paidAmount | number:'2.'}}</td>
                        <td>{{billAmount | number:'2.'}}</td>
                        <td>{{amountDue | number:'2.'}}</td>
                        <td>{{currency}}</td>
                    </tr>
                </tbody>
            </table>
            </div>
          </div>
          <div class="row pb-3">
              <label class="amount-words">
                  <strong>PAID AMOUNT IN WORDS:</strong>
              </label>
              <span>
                     ****{{amountPaidWords}}****
              </span>
          </div>

          <div class="row pb-3">
            <label class="amount-words">
                <strong>OUTSTANDING BALANCE IN WORDS:</strong>
            </label>
            <span>
                   ****{{amountDueWords}}****
            </span>
        </div>
          <div class="row justify-content-between mt-5">
              <div class="stamp">
                  <!-- <span><input type="text" class="reciever-name"></span> -->
                  <span>Received with thanks</span>
                  <span><i>For: Zanzibar Social Security Fund</i></span>
                  <!-- <span>
                      <strong><i>This reciept is only valid if it has ZSSF Stamp</i></strong>
                  </span> -->
              </div>
              <div class="">
                <span class="font-weight-bold" style="color: #489463;">{{receiptNo}}</span>
                  <!-- <input type="text" class="form-control" [value]="receiptNumber"> -->
              </div>
          </div>
  </div>
  </div>
  </div>
  