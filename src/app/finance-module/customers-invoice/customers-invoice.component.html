<div class="content-block" *ngIf="hideViewDetailsTable">
  <div class="dx-card responsive-paddings">
    <dx-data-grid
    id="gridContainer2"
    (onToolbarPreparing)="onToolBarPreparing($event)"
    [allowColumnResizing]="true"
    [columnAutoWidth]="true"
    (onRowClick)="onViewAdditionalDetails($event)"
    [columnHidingEnabled]="false"
    [dataSource]="datasource"
    [focusedRowEnabled]="true"
    [showBorders]="true"
    [showRowLines]="true"
    height="funcpopHeigt(datagridHeight)"
    keyExpr="invoiceId">

    <dxo-search-panel [visible]="true"></dxo-search-panel>
    <dxo-paging [pageSize]="100"></dxo-paging>
    <dxo-pager [allowedPageSizes]="[20, 50, 100]" [showPageSizeSelector]="true"></dxo-pager>
    <dxo-filter-row [visible]="false"></dxo-filter-row>
    <dxo-export [allowExportSelectedData]="true" [enabled]="true" fileName="Customers Invoices"></dxo-export>
    <dxo-selection mode="single"></dxo-selection>
    <dxo-header-filter [visible]="true"></dxo-header-filter>
    <dxo-filter-panel [visible]="true"></dxo-filter-panel>

    <dxi-column caption="Invoice ID" dataField="invoiceId"></dxi-column>
    <dxi-column caption="Posting Date" dataField="postingDate" dataType="date" format="yyyy-MM-dd h:mm a"></dxi-column>
    <dxi-column caption="Invoice Type" dataField="invoiceType"></dxi-column>
    <dxi-column caption="Customer ID" dataField="customerId"></dxi-column>
    <dxi-column caption="Customer Name" dataField="customerName"></dxi-column>

    <dxi-column caption="Amount" dataField="amount" dataType="number">
      <dxo-format type="fixedPoint" [precision]="2"> </dxo-format>
    </dxi-column>
    <dxi-column caption="Currency" dataField="currency"></dxi-column>
    <!-- <dxi-column [width]="100" caption="Status" cellTemplate="cellTemplateEnabled" dataField="status"
      dataType="string">
      <div *dxTemplate="let d of 'cellTemplateEnabled'">
        <div *ngIf="d.data.STATUS == 1" class="text-center">
          <span class="text-white bg-success rounded pl-2 pr-2">Cleared</span>
        </div>
        <div *ngIf="d.data.STATUS != 1" class="text-center">
          <span class="text-white bg-danger rounded pl-2 pr-2">Not Cleared</span>
        </div>
      </div>
    </dxi-column> -->
    <dxi-column caption="Description" dataField="description"></dxi-column>
  </dx-data-grid>
      </div>
</div>



<div class="content-block" *ngIf="!hideViewDetailsTable">
  <h4 class="header_title mb-3 p-2">Customer Invoice Details.</h4>
  <div class="dx-card responsive-paddings">

    <dx-button
    class="mb-3 mt-3"
    icon="fa fa-arrow-left"
    text="Back"
    type="default"
    (onClick)="onCloseViewDetailsTable()">

    </dx-button>

    <table class="table table-striped table-inverse table-bordered mb-3 mt-3">
      <thead class="thead-inverse">
        <tr>
          <th>Invoice Id</th>
          <th>Invoice Type</th>
          <th>Customer Id</th>
          <th>Customer Name</th>
          <th>Posting Date</th>
          <th>Description</th>
          <th>Currency</th>
          <th>Amount</th>
        </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{invoiceId}}</td>
            <td>{{invoiceType}}</td>
            <td>{{customerId}}</td>
            <td>{{customerName}}</td>
            <td>{{postingDate}}</td>
            <td>{{description}}</td>
            <td>{{currency}}</td>
            <td>{{amount | currency: 'USD': ''}}</td>
          </tr>
        </tbody>
    </table>

    <dx-data-grid
    id="gridContainer2"
    class="mb-3 mt-3"
    [dataSource]="invoceDetailsDatasource"
    [showBorders]="true"
    [focusedRowEnabled]="false"
    [showRowLines] = "true"
    [allowColumnResizing]="true"
    [columnAutoWidth]="true"
    [columnHidingEnabled]="false"
    height="funcpopHeigt(datagridHeight)">
    <dxo-export [enabled]="true" fileName="Customer Invoice Details" [allowExportSelectedData]="true"></dxo-export>
    <dxo-paging [pageSize]="10"></dxo-paging>
    <dxo-load-panel [enabled]="true"></dxo-load-panel>
    <dxo-pager
    [showPageSizeSelector]="true"
    [allowedPageSizes]="allowedPageSises"
></dxo-pager>
    <dxo-search-panel [visible]="false"></dxo-search-panel>
    <dxo-filter-row [visible]="false"></dxo-filter-row>

</dx-data-grid>


<dx-button
*ngIf="checkUserAccessRight(['DELETE', 'EDIT'])"
class="mb-3 mt-3 text-left ml-3"
text="Generate Bill"
type="default"
(onClick)="onCustomerBillGenerate()">

</dx-button>

  </div>
</div>
